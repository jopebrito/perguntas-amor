<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0f0a1a">
    <title>Pedro & Rita</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüíï%3C/text%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="hearts-bg" class="hearts-background"></div>

    <!-- ===== WELCOME ===== -->
    <div id="screen-welcome" class="screen active">
        <div class="screen-inner centered">
            <div class="intro-photos">
                <div class="intro-photo-wrap">
                    <img src="pedro.jpg" alt="Pedro" class="intro-photo" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                    <div class="intro-photo-fallback" style="display:none">üßî</div>
                </div>
                <div class="intro-heart">‚ù§Ô∏è</div>
                <div class="intro-photo-wrap">
                    <img src="rita.jpg" alt="Rita" class="intro-photo" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                    <div class="intro-photo-fallback" style="display:none">üë©</div>
                </div>
            </div>
            <h1 class="title-main">Pedro <span class="title-amp">&</span> Rita</h1>
            <p class="intro-tagline">O nosso jogo</p>
            <div class="intro-letter">
                <p>Este jogo √© nosso. S√≥ nosso.</p>
                <p>Todos os dias, 15 novas perguntas para descobrirmos mais um sobre o outro. Sem pressa, ao nosso ritmo.</p>
                <p>Responde com honestidade ‚Äî √© assim que nos vamos conhecer a s√©rio. üíï</p>
            </div>
            <button class="btn btn-primary btn-glow" onclick="App.go('login')">Entrar</button>
        </div>
    </div>

    <!-- ===== LOGIN ===== -->
    <div id="screen-login" class="screen">
        <div class="screen-inner centered">
            <h2 class="section-title">Quem √©s tu?</h2>
            <p class="subtitle">Escolhe o teu perfil</p>
            <div class="login-grid">
                <button class="card-login" id="card-pedro" onclick="App.selectUser('pedro')">
                    <div class="card-photo">
                        <img src="pedro.jpg" alt="Pedro" class="card-photo-img" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                        <div class="card-photo-fallback" style="display:none">üßî</div>
                    </div>
                    <div class="card-name">Pedro</div>
                </button>
                <button class="card-login" id="card-rita" onclick="App.selectUser('rita')">
                    <div class="card-photo">
                        <img src="rita.jpg" alt="Rita" class="card-photo-img" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                        <div class="card-photo-fallback" style="display:none">üë©</div>
                    </div>
                    <div class="card-name">Rita</div>
                </button>
            </div>
            <!-- PIN entry -->
            <div id="pin-area" class="pin-area" style="display:none">
                <p class="pin-label" id="pin-label">PIN do Pedro</p>
                <div class="pin-dots" id="pin-dots">
                    <span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span>
                </div>
                <div class="pin-pad">
                    <button class="pin-key" onclick="App.pinKey('1')">1</button>
                    <button class="pin-key" onclick="App.pinKey('2')">2</button>
                    <button class="pin-key" onclick="App.pinKey('3')">3</button>
                    <button class="pin-key" onclick="App.pinKey('4')">4</button>
                    <button class="pin-key" onclick="App.pinKey('5')">5</button>
                    <button class="pin-key" onclick="App.pinKey('6')">6</button>
                    <button class="pin-key" onclick="App.pinKey('7')">7</button>
                    <button class="pin-key" onclick="App.pinKey('8')">8</button>
                    <button class="pin-key" onclick="App.pinKey('9')">9</button>
                    <button class="pin-key" onclick="App.pinKey('clear')">‚úï</button>
                    <button class="pin-key" onclick="App.pinKey('0')">0</button>
                    <button class="pin-key pin-go" onclick="App.pinKey('go')">‚Üí</button>
                </div>
                <p class="pin-hint">Primeira vez? O PIN que escreveres fica como teu.</p>
            </div>
        </div>
    </div>

    <!-- ===== DASHBOARD (Calendar) ===== -->
    <div id="screen-dashboard" class="screen">
        <div class="screen-inner">
            <div class="dash-top">
                <div class="dash-user">
                    <span id="dash-avatar"></span>
                    <span id="dash-name"></span>
                </div>
                <button class="btn-icon" onclick="App.logout()" title="Sair">üö™</button>
            </div>

            <div class="cal-header">
                <h2>Os Nossos Dias</h2>
                <p class="cal-sub">15 perguntas novas todos os dias</p>
                <div class="cal-stats" id="cal-stats"></div>
            </div>

            <div class="calendar-grid" id="calendar-grid">
                <!-- Generated by JS -->
            </div>

            <details class="reset-details">
                <summary class="reset-summary">Op√ß√µes avan√ßadas</summary>
                <button class="btn btn-danger btn-block" onclick="App.resetConfirm()">
                    Apagar todas as minhas respostas
                </button>
            </details>
        </div>
    </div>

    <!-- ===== DAY VIEW (Answer questions) ===== -->
    <div id="screen-day" class="screen">
        <div class="screen-inner">
            <div class="q-top">
                <button class="btn-back" onclick="App.go('dashboard')">‚Üê Voltar</button>
                <span class="day-badge" id="day-badge">Dia 1</span>
                <span class="q-count" id="q-count"></span>
            </div>
            <div class="q-bar"><div class="q-bar-fill" id="q-bar-fill"></div></div>
            <div class="q-card" id="q-card">
                <div class="q-cat" id="q-cat"></div>
                <p class="q-text" id="q-text"></p>
            </div>
            <div class="q-answers" id="q-answers"></div>
            <div class="q-nav">
                <button class="btn btn-sm" id="btn-prev" onclick="App.prev()">‚Üê Anterior</button>
                <button class="btn btn-sm" id="btn-skip" onclick="App.next()">Saltar ‚Üí</button>
                <button class="btn btn-sm btn-accent" id="btn-next" onclick="App.next()" style="display:none">Pr√≥xima ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- ===== COMPARE VIEW ===== -->
    <div id="screen-compare" class="screen">
        <div class="screen-inner">
            <div class="q-top">
                <button class="btn-back" onclick="App.go('dashboard')">‚Üê Voltar</button>
                <span class="day-badge" id="compare-badge">Dia 1</span>
                <span></span>
            </div>
            <div class="compare-header">
                <div class="compare-person">
                    <img src="pedro.jpg" alt="Pedro" class="compare-av" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                    <div class="compare-av-emoji" style="display:none">üßî</div>
                    <span>Pedro</span>
                </div>
                <div class="compare-vs">vs</div>
                <div class="compare-person">
                    <img src="rita.jpg" alt="Rita" class="compare-av" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                    <div class="compare-av-emoji" style="display:none">üë©</div>
                    <span>Rita</span>
                </div>
            </div>
            <div class="compare-match" id="compare-match" style="display:none">
                <span class="compare-pct" id="compare-pct">0%</span>
                <span class="compare-label">parecidos neste dia</span>
            </div>
            <div class="compare-list" id="compare-list"></div>
        </div>
    </div>

    <!-- Confirm modal -->
    <div id="modal" class="modal" style="display:none">
        <div class="modal-box">
            <p id="modal-msg"></p>
            <div class="modal-btns">
                <button class="btn btn-sm" onclick="App.modalClose()">Cancelar</button>
                <button class="btn btn-sm btn-danger-sm" id="modal-confirm" onclick="">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <!-- Loading -->
    <div id="loading" class="loading-overlay">
        <div class="loading-inner"><div class="spin-heart">üíñ</div><p>A carregar...</p></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="questions.js"></script>
    <script src="app.js"></script>
</body>
</html>
